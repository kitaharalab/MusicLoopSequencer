{"ast":null,"code":"var _jsxFileName = \"/home/sclab/renewal/frontend/src/ExcitementCurve.jsx\",\n  _s = $RefreshSig$();\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ExcitementCurve() {\n  _s();\n  const canvasRef = useRef();\n  const curveLength = 1152;\n  const curveInitial = 250;\n  const [linesY, setLinesY] = useState(new Array(curveLength).fill(curveInitial));\n  const [posX, setPosX] = useState(0);\n  const [posY, setPosY] = useState(0);\n  const startDraw = _ref => {\n    let {\n      nativeEvent\n    } = _ref;\n    const {\n      offsetX,\n      offsetY\n    } = nativeEvent;\n    setPosX(Math.floor(offsetX));\n    setPosY(Math.floor(offsetY));\n    setLinesY(linesY.map((pos, index) => index === posX ? posY : pos));\n    setDrawing(true);\n  };\n  const draw = _ref2 => {\n    let {\n      nativeEvent\n    } = _ref2;\n    if (!drawing) {\n      return;\n    }\n    const {\n      offsetX,\n      offsetY\n    } = nativeEvent;\n    let array = new Array(curveLength);\n    for (let i = 0; i < curveLength; i++) {\n      array[i] = linesY[i];\n    }\n    array[offsetX] = offsetY;\n    let difference = Math.floor(Math.abs(offsetX - posX));\n    if (offsetX > posX) {\n      for (let i = 1; i < difference; i++) {\n        array[posX + i] = Math.floor(posY + (offsetY - posY) * (posX + i - posX) / (offsetX - posX));\n      }\n    } else {\n      for (let i = 1; i < difference; i++) {\n        array[posX - i] = Math.floor(posY + (offsetY - posY) * (posX - i - posX) / (offsetX - posX));\n      }\n    }\n    setLinesY([...array]);\n    setPosX(Math.floor(offsetX));\n    setPosY(Math.floor(offsetY));\n  };\n  const stopDraw = () => {\n    setDrawing(false);\n  };\n  useEffect(() => {\n    const canvas1 = canvasRef.current;\n    const ctx1 = canvas1.getContext('2d');\n    ctx1.fillStyle = 'black';\n    ctx1.strokeStyle = \"black\";\n    ctx1.lineWidth = \"3\";\n    ctx1.strokeRect(0, 0, canvas1.width, canvas1.height);\n    ctx1.lineWidth = \"1\";\n    ctx1.clearRect(0, 1, 1151, 278);\n    ctx1.strokeStyle = \"gray\";\n    for (let i = 0; i < 32; i++) {\n      for (let j = 0; j < 5; j++) {\n        ctx1.strokeRect(36 * i, 56 * j, 36, 56);\n      }\n    }\n    ctx1.lineWidth = \"3\";\n    ctx1.strokeStyle = \"blue\";\n    ctx1.beginPath();\n    for (var i = 0; i < 1151; i++) {\n      ctx1.moveTo(i, linesY[i]); //盛り上がり度曲線を描く．\n      ctx1.lineTo(i + 1, linesY[i + 1]);\n    }\n    ctx1.stroke();\n  }, [linesY]);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: canvasRef,\n    style: style1,\n    width: \"1152\",\n    height: \"280\",\n    id: \"canvas1\",\n    onMouseDown: startDraw,\n    onMouseUp: stopDraw,\n    onMouseMove: draw\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n}\n_s(ExcitementCurve, \"x7gWJqeJ2OaZn4Cmtij+O+XNLZE=\");\n_c = ExcitementCurve;\nvar _c;\n$RefreshReg$(_c, \"ExcitementCurve\");","map":{"version":3,"names":["ExcitementCurve","canvasRef","useRef","curveLength","curveInitial","linesY","setLinesY","useState","Array","fill","posX","setPosX","posY","setPosY","startDraw","nativeEvent","offsetX","offsetY","Math","floor","map","pos","index","setDrawing","draw","drawing","array","i","difference","abs","stopDraw","useEffect","canvas1","current","ctx1","getContext","fillStyle","strokeStyle","lineWidth","strokeRect","width","height","clearRect","j","beginPath","moveTo","lineTo","stroke","style1"],"sources":["/home/sclab/renewal/frontend/src/ExcitementCurve.jsx"],"sourcesContent":["\nexport default function ExcitementCurve() {\n    const canvasRef = useRef();\n    const curveLength = 1152;\n    const curveInitial = 250;\n    const [linesY, setLinesY] = useState(new Array(curveLength).fill(curveInitial))\n    const [posX, setPosX] = useState(0);\n    const [posY, setPosY] = useState(0);\n\n    const startDraw = ({ nativeEvent }) => {\n        const { offsetX, offsetY } = nativeEvent;\n        setPosX(Math.floor(offsetX));\n        setPosY(Math.floor(offsetY));\n        setLinesY(linesY.map((pos, index) => (index === posX ? posY : pos)))\n        setDrawing(true);\n    };\n\n    const draw = ({ nativeEvent }) => {\n        if (!drawing) { return; }\n        const { offsetX, offsetY } = nativeEvent;\n        let array = new Array(curveLength);\n        for (let i = 0; i < curveLength; i++) {\n            array[i] = linesY[i]\n        }\n        array[offsetX] = offsetY;\n        let difference = Math.floor((Math.abs(offsetX - posX)));\n        if (offsetX > posX) {\n            for (let i = 1; i < difference; i++) {\n                array[posX + i] = Math.floor(posY + (offsetY - posY) * (posX + i - posX) / (offsetX - posX));\n            }\n        } else {\n            for (let i = 1; i < difference; i++) {\n                array[posX - i] = Math.floor(posY + (offsetY - posY) * (posX - i - posX) / (offsetX - posX));\n            }\n        }\n        setLinesY([...array])\n\n        setPosX(Math.floor(offsetX))\n        setPosY(Math.floor(offsetY))\n\n    };\n\n    const stopDraw = () => {\n        setDrawing(false);\n    };\n\n\n    useEffect(() => {\n        const canvas1 = canvasRef.current;\n        const ctx1 = canvas1.getContext('2d');\n\n        ctx1.fillStyle = 'black';\n        ctx1.strokeStyle = \"black\"\n        ctx1.lineWidth = \"3\"\n        ctx1.strokeRect(0, 0, canvas1.width, canvas1.height);\n        ctx1.lineWidth = \"1\"\n        ctx1.clearRect(0, 1, 1151, 278);\n        ctx1.strokeStyle = \"gray\"\n        for (let i = 0; i < 32; i++) {\n            for (let j = 0; j < 5; j++) {\n                ctx1.strokeRect(36 * i, 56 * j, 36, 56);\n            }\n        }\n        ctx1.lineWidth = \"3\";\n        ctx1.strokeStyle = \"blue\"\n        ctx1.beginPath();\n        for (var i = 0; i < 1151; i++) {\n            ctx1.moveTo(i, linesY[i]);          //盛り上がり度曲線を描く．\n            ctx1.lineTo(i + 1, linesY[i + 1]);\n        }\n        ctx1.stroke();\n\n\n\n    }, [linesY]);\n\n\n    return (\n        <canvas ref={canvasRef} style={style1} width=\"1152\" height=\"280\" id=\"canvas1\"\n            onMouseDown={startDraw}\n            onMouseUp={stopDraw}\n            onMouseMove={draw}>\n        </canvas>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}